// Forms basic
/*************************************************************
* Override Bootstrap variables
**************************************************************/
$input-padding-y: 0.85rem;
$input-padding-x: 1rem;
$input-padding-y-xs:              $input-btn-padding-y-sm * 0.85;
$input-padding-x-xs:              $input-btn-padding-x-sm * 0.85;
$input-font-size-xs:              $input-font-size-sm * 0.85;
$form-select-padding-y-xs:        $input-padding-y-xs;
$form-select-padding-x-xs:        $input-padding-x-xs;
$form-select-font-size-xs:        $input-font-size-xs;
$input-border-radius-xs:          var(--#{$prefix}border-radius-sm);
$form-select-border-radius-xs:    $input-border-radius-xs;

/*************************************************************
* Style variables
**************************************************************/
$form-file-button-color: $text-main-color-f2;
$form-file-button-bg: bsik-colors("secondary", "base");
$form-file-button-hover-bg: bsik-colors("secondary", "lighten-1");
$sikform-input-color: $text-main-color;
$sikform-input-placeholder-color: hsla(0,0%,100%,.4);
$sikform-input-bg: bsik-colors("secondary", "darken-1");
$sikform-input-bg-focus: bsik-colors("secondary", "base");
$sikform-input-border: 2px solid lighten($primary, 10%);
$sikform-input-border-focus: 2px solid lighten($primary, 20%);
$sikform-input-transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
$sikform-input-caret-color: $text-main-color;
$sikform-input-caret-focus-color: lighten($primary, 20%);
$sikform-input-caret-stroke-color: $secondary;
$sikform-input-caret-stroke-width: 25;
$sikform-select-indicator: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><path fill='none' stroke='#{$text-main-color}' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/></svg>");
$sikform-select-indicator-disabled: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><path fill='none' stroke='#{darken($text-main-color, 30%)}' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/></svg>");
$sikform-input-caret-svg: "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 700'><path fill='#{$sikform-input-caret-color}' stroke='#{$sikform-input-caret-stroke-color}' stroke-width='#{$sikform-input-caret-stroke-width}' d='M 285.476 377.971 L 91.132 572.314 c -9.373 9.373 -24.569 9.373 -33.941 0 l -22.667 -22.667 c -9.357 -9.357 -9.375 -24.522 -0.04 -33.901 L 188.505 361 L 34.484 206.255 c -9.335 -9.379 -9.317 -24.544 0.04 -33.901 l 22.667 -22.667 c 9.373 -9.373 24.569 -9.373 33.941 0 L 285.475 344.03 c 9.373 9.372 9.373 24.568 0.001 33.941 z'/></svg>";
$sikform-input-caret-focus-svg: "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 700'><path fill='#{$sikform-input-caret-focus-color}' stroke='#{$sikform-input-caret-stroke-color}' stroke-width='#{$sikform-input-caret-stroke-width}' d='M 285.476 377.971 L 91.132 572.314 c -9.373 9.373 -24.569 9.373 -33.941 0 l -22.667 -22.667 c -9.357 -9.357 -9.375 -24.522 -0.04 -33.901 L 188.505 361 L 34.484 206.255 c -9.335 -9.379 -9.317 -24.544 0.04 -33.901 l 22.667 -22.667 c 9.373 -9.373 24.569 -9.373 33.941 0 L 285.475 344.03 c 9.373 9.372 9.373 24.568 0.001 33.941 z'/></svg>";
$sikform-input-icon-caret: "M 285.476 377.971 L 91.132 572.314 c -9.373 9.373 -24.569 9.373 -33.941 0 l -22.667 -22.667 c -9.357 -9.357 -9.375 -24.522 -0.04 -33.901 L 188.505 361 L 34.484 206.255 c -9.335 -9.379 -9.317 -24.544 0.04 -33.901 l 22.667 -22.667 c 9.373 -9.373 24.569 -9.373 33.941 0 L 285.475 344.03 c 9.373 9.372 9.373 24.568 0.001 33.941 z";
$sikform-formtext-color: $text-main-color-f2;

// SH: this is a bug fix related to spinners not showing on chrome when  
::-webkit-inner-spin-button {
    height: auto;
    width: 15px;
}

/***************************************************************************/
/* BSik Dropdown
/***************************************************************************/
.sik-dropdown {
    > button.dropdown-toggle {
        position: relative;
        width: 100%;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        height: calc(3.5rem + 2px);
        padding: 1rem 0.75rem;
        padding-right: 2ch;
        text-align: left;
        color: $text-negative-color;
        line-height: 1.5;
        font-size: 1rem;
        font-weight: 400;
        border-radius: 0.25rem;
        background-color: whitesmoke;
        border: 1px solid #ced4da;
        &::after {
            position: absolute;
            right: 1ch;
            top: calc(50% - 0.2ch);
        }
    }
    
    .dropdown-menu {
        min-width: 100%;
        .dropdown-item {
            cursor: pointer;
            font-size: 0.95rem;
        }
    }

    &.color-dark {

    }
}

/***************************************************************************/
/* BSik MaxType plugin
/***************************************************************************/
textarea + div.max-type-counter,
input[type]:not([type=search]):not([type=url]):not([type=hidden]):not([type=button]):not([type=submit]) + div.max-type-counter {
    font-size: 0.7rem;
    font-weight: 400;
    text-align: right;
    float: right;
    transform: translate(0px, -7px);
    opacity: 0;
    transition: all ease .4s;
    height: 0;
    line-height: 0;
    &.is-maxed {
        color:red;
    }
}
textarea + div.max-type-counter {
    transform: translate(0px, -10px);
}
input[type]:not([type=search]):not([type=url]):not([type=hidden]):not([type=button]):not([type=submit]):focus + div.max-type-counter {
    transform: translate(-5px, -7px);
    opacity: 1;
}
textarea:focus + div.max-type-counter {
    transform: translate(-12px, -10px);
    opacity: 1;
}

/***************************************************************************/
/* BSik dark forms
/***************************************************************************/
.sik-form-init {
    //
    // Form Control
    //
    .form-control {
        position: relative;
        color: $sikform-input-color;
        background-color: $sikform-input-bg;
        border: 0;
        padding: $input-padding-y $input-padding-x;
        border-radius: 0.15rem;
        box-shadow: none;
        @include transition($sikform-input-transition);
        &[type="file"] {
            overflow: hidden; // prevent pseudo element button overlap
            &:not(:disabled):not([readonly]) {
                cursor: pointer;
            }
        }
        // Customize the `:focus` state to imitate native WebKit styles.
        &:focus {
            color: $sikform-input-color;
            border-color: inherit;
            background-color: $sikform-input-bg-focus;
            outline: 0;
            box-shadow: none;
            // box-shadow: 0px 4px 3px -0.2rem lighten($primary, 20%);
            outline: 1px solid lighten($sikform-input-bg-focus, 5%);
        }
        // Add some height to date inputs on iOS
        &::-webkit-date-and-time-value {
            height: if(unit($input-line-height)=="", $input-line-height * 1em, $input-line-height);
        }
        // Placeholder
        &::placeholder {
            color: $sikform-input-placeholder-color;
            opacity: 1;
        }
        // Disabled and read-only inputs
        &:disabled,
        &[readonly] {
            background-color: darken($sikform-input-bg, 2%);
            border-color: $input-disabled-border-color;
            opacity: 1;
        }
        // File input buttons theming
        &::file-selector-button {
            padding: $input-padding-y $input-padding-x;
            margin: (-$input-padding-y) (-$input-padding-x);
            margin-inline-end: $input-padding-x;
            color: $form-file-button-color;
            @include gradient-bg($form-file-button-bg);
            pointer-events: none;
            border-color: inherit;
            border-style: solid;
            border-width: 0;
            border-inline-end-width: $input-border-width;
            border-radius: 0; // stylelint-disable-line property-disallowed-list
            @include transition($btn-transition);
        }
        &:hover:not(:disabled):not([readonly])::file-selector-button {
            background-color: $form-file-button-hover-bg;
            color: lighten($primary, 20%);
        }
        &::-webkit-file-upload-button {
            padding: $input-padding-y $input-padding-x;
            margin: (-$input-padding-y) (-$input-padding-x);
            margin-inline-end: $input-padding-x;
            color: $form-file-button-color;
            @include gradient-bg();
            pointer-events: none;
            border-color: lighten($form-file-button-bg, 10%);
            border-style: solid;
            border-width: 0;
            border-inline-end-width: $input-border-width;
            border-radius: 0; // stylelint-disable-line property-disallowed-list
            @include transition($btn-transition);
        }
        &:hover:not(:disabled):not([readonly])::-webkit-file-upload-button {
            background-color: $form-file-button-hover-bg;
            color: lighten($primary, 5%);
        }
    }
    //
    // Form text
    //
    .form-text {
        color: $sikform-formtext-color;
    }
    // Readonly controls as plain text
    .form-control-plaintext {
        display: block;
        width: 100%;
        padding: $input-padding-y 0;
        margin-bottom: 0; // match inputs if this class comes on inputs with default margins
        line-height: $input-line-height;
        color: $input-plaintext-color;
        background-color: transparent;
        border: solid transparent;
        border-width: $input-border-width 0;
        &.form-control-xs,
        &.form-control-sm,
        &.form-control-lg {
            padding-right: 0;
            padding-left: 0;
        }
    }
    .form-control-xs {
        padding: $input-padding-y-xs $input-padding-x-xs;
        &::file-selector-button {
            padding: $input-padding-y-xs $input-padding-x-xs;
            margin: (-$input-padding-y-xs) (-$input-padding-x-xs);
            margin-inline-end: $input-padding-x-xs;
        }
        &::-webkit-file-upload-button {
            padding: $input-padding-y-xs $input-padding-x-xs;
            margin: (-$input-padding-y-xs) (-$input-padding-x-xs);
            margin-inline-end: $input-padding-x-xs;
        }
        @include font-size($input-font-size-xs);
    }
    .form-control-sm {
        padding: $input-padding-y-sm $input-padding-x-sm;
        &::file-selector-button {
            padding: $input-padding-y-sm $input-padding-x-sm;
            margin: (-$input-padding-y-sm) (-$input-padding-x-sm);
            margin-inline-end: $input-padding-x-sm;
        }
        &::-webkit-file-upload-button {
            padding: $input-padding-y-sm $input-padding-x-sm;
            margin: (-$input-padding-y-sm) (-$input-padding-x-sm);
            margin-inline-end: $input-padding-x-sm;
        }
        @include font-size($input-font-size-sm);
    }
    .form-control-lg {
        padding: $input-padding-y-lg $input-padding-x-lg;
        &::file-selector-button {
            padding: $input-padding-y-lg $input-padding-x-lg;
            margin: (-$input-padding-y-lg) (-$input-padding-x-lg);
            margin-inline-end: $input-padding-x-lg;
        }
        &::-webkit-file-upload-button {
            padding: $input-padding-y-lg $input-padding-x-lg;
            margin: (-$input-padding-y-lg) (-$input-padding-x-lg);
            margin-inline-end: $input-padding-x-lg;
        }
        @include font-size($input-font-size-lg);
    }
    // Make sure textareas don't shrink too much when resized
    textarea {
        &.form-control {
            border: 0;
        }
    }
    // stylelint-enable selector-no-qualifying-type
    .form-control-color {
        max-width: 4rem;
        height: auto; // Override fixed browser height
        padding: $input-padding-y;
        &:not(:disabled):not([readonly]) {
            cursor: pointer;
        }
        &::-moz-color-swatch {
            height: if(unit($input-line-height)=="", $input-line-height * 1em, $input-line-height);
            @include border-radius($input-border-radius);
        }
        &::-webkit-color-swatch {
            height: if(unit($input-line-height)=="", $input-line-height * 1em, $input-line-height);
            @include border-radius($input-border-radius);
        }
    }
    //
    // Form Select
    //
    // Replaces the browser default select with a custom one, mostly pulled from
    .form-select {
        display: block;
        width: 100%;
        color: $sikform-input-color;
        background-color: $sikform-input-bg;
        border: 0;
        padding: $input-padding-y $input-padding-x;
        border-radius: 0.35rem;
        background-image: escape-svg($sikform-select-indicator);
        background-repeat: no-repeat;
        &:focus {
            border-color: $form-select-focus-border-color;
            outline: 0;
            @if $enable-shadows {
                @include box-shadow($form-select-box-shadow,
                $form-select-focus-box-shadow);
            }
            @else {
                box-shadow: $form-select-focus-box-shadow;
            }
        }
        &[multiple],
        &[size]:not([size="1"]) {
            padding-right: $form-select-padding-x;
            background-image: none;
        }
        &:disabled {
            color: darken($sikform-input-color, 40%);
            background-color: darken($sikform-input-bg, 2%);
            background-image: escape-svg($sikform-select-indicator-disabled);
        }
        // Remove outline from select box in FF
        &:-moz-focusring {
            color: transparent;
            text-shadow: 0 0 0 $form-select-color;
        }
    }
    .form-select-xs {
        padding: $form-select-padding-y-xs $form-select-padding-x-xs;
        @include font-size($form-select-font-size-xs);
    }
    .form-select-sm {
        padding: $form-select-padding-y-sm $form-select-padding-x-sm;
        @include font-size($form-select-font-size-sm);
    }
    .form-select-lg {
        padding: $form-select-padding-y-lg $form-select-padding-x-lg;
        @include font-size($form-select-font-size-lg);
    }

    //
    // Form check
    //
    .form-check {
        &.form-switch {
            .form-check-input {
                // height: 24px;
                // width: 48px;
                background-color: bsik-colors("secondary", "lighten-5");
                border-color: bsik-colors("secondary", "lighten-5");
                background-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='rgba(0,0,0,0.45)'/></svg>");
                &:focus {
                    border-color: bsik-colors("secondary", "base");
                    background-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='rgba(0,0,0,0.45)'/></svg>");
                }
                &:checked {
                    border-color: bsik-colors("green", "base");
                    background-color: bsik-colors("green", "base");
                    background-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='rgba(0,0,0,0.45)'/></svg>");
                }
            }
            .form-check-label {
                font-size: 0.8rem;
            }
        }
    }
}


/***************************************************************************/
/* BSik light forms
/***************************************************************************/
$sikform-input-color-light:                 $sikform-input-color;
$sikform-input-bg-light:                    $sikform-input-bg;
$sikform-input-bg-focus-light:              $sikform-input-bg-focus;
$sikform-input-placeholder-color-light:     $sikform-input-placeholder-color;
$input-disabled-border-color-light:         $input-disabled-border-color;
$form-file-button-color-light:              $form-file-button-color;
$form-file-button-bg-light:                 $form-file-button-bg;
$form-file-button-hover-bg-light:           $form-file-button-hover-bg;
$sikform-formtext-color-light:              $sikform-formtext-color;
$input-plaintext-color-light:               $input-plaintext-color;
$sikform-select-indicator-light:            $sikform-select-indicator;
$form-select-focus-border-color-light:      $form-select-focus-border-color;
$form-select-box-shadow-light:              $form-select-box-shadow;
$form-select-focus-box-shadow-light:        $form-select-focus-box-shadow;
$sikform-select-indicator-disabled-light:   $sikform-select-indicator-disabled;
$form-select-color-light:                   $form-select-color;

.sik-form-init.light-forms {
    //
    // Form Control
    //
    .form-control {
        color: $sikform-input-color;
        background-color: $sikform-input-bg;
        // Customize the `:focus` state to imitate native WebKit styles.
        &:focus {
            color: $sikform-input-color;
            background-color: $sikform-input-bg-focus;
            outline: 1px solid lighten($sikform-input-bg-focus, 5%);
        }
        // Placeholder
        &::placeholder {
            color: $sikform-input-placeholder-color;
        }
        // Disabled and read-only inputs
        &:disabled,
        &[readonly] {
            background-color: darken($sikform-input-bg, 2%);
            border-color: $input-disabled-border-color;
        }
        // File input buttons theming
        &::file-selector-button {
            color: $form-file-button-color;
            @include gradient-bg($form-file-button-bg);
        }
        &:hover:not(:disabled):not([readonly])::file-selector-button {
            background-color: $form-file-button-hover-bg;
            color: lighten($primary, 20%);
        }
        &::-webkit-file-upload-button {
            color: $form-file-button-color;
            @include gradient-bg();
            border-color: lighten($form-file-button-bg, 10%);
        }
        &:hover:not(:disabled):not([readonly])::-webkit-file-upload-button {
            background-color: $form-file-button-hover-bg;
            color: lighten($primary, 5%);
        }
    }
    //
    // Form text
    //
    .form-text {
        color: $sikform-formtext-color;
    }
    // Readonly controls as plain text
    .form-control-plaintext {
        color: $input-plaintext-color;
        background-color: transparent;
        border: solid transparent;
    }
    //
    // Form Select
    //
    // Replaces the browser default select with a custom one, mostly pulled from
    .form-select {
        color: $sikform-input-color;
        background-color: $sikform-input-bg;
        background-image: escape-svg($sikform-select-indicator);
        background-repeat: no-repeat;
        &:focus {
            border-color: $form-select-focus-border-color;
            @if $enable-shadows {
                @include box-shadow($form-select-box-shadow, $form-select-focus-box-shadow);
            }
            @else {
                box-shadow: $form-select-focus-box-shadow;
            }
        }
        &:disabled {
            color: darken($sikform-input-color, 40%);
            background-color: darken($sikform-input-bg, 2%);
            background-image: escape-svg($sikform-select-indicator-disabled);
        }
        // Remove outline from select box in FF
        &:-moz-focusring {
            color: transparent;
            text-shadow: 0 0 0 $form-select-color;
        }
    }
    //
    // Form check
    //
    .form-check {
        &.form-switch {
            .form-check-input {
                background-color: bsik-colors("secondary", "lighten-5");
                border-color: bsik-colors("secondary", "lighten-5");
                background-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='rgba(0,0,0,0.45)'/></svg>");
                &:focus {
                    border-color: bsik-colors("secondary", "base");
                    background-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='rgba(0,0,0,0.45)'/></svg>");
                }
                &:checked {
                    border-color: bsik-colors("green", "base");
                    background-color: bsik-colors("green", "base");
                    background-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='rgba(0,0,0,0.45)'/></svg>");
                }
            }
        }
    }
}